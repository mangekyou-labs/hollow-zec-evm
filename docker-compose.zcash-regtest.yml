services:
  zcashd-regtest:
    image: electriccoinco/zcashd:latest
    container_name: zcashd-regtest
    ports:
      - "18332:18332"  # RPC port for regtest (different from testnet)
    volumes:
      - zcash-regtest-data:/srv/zcashd/.zcash
      - zcash-regtest-data:/srv/zcashd/export
    entrypoint: ["/usr/bin/zcashd"]
    command:
      - "-regtest"
      - "-rpcuser=zcashuser"
      - "-rpcpassword=zcashpass"
      - "-rpcport=18332"
      - "-rpcallowip=0.0.0.0/0"
      - "-rpcbind=0.0.0.0"
      - "-server"
      - "-daemon=0"
      - "-i-am-aware-zcashd-will-be-replaced-by-zebrad-and-zallet-in-2025=1"
      - "-allowdeprecated=getnewaddress"
      - "-allowdeprecated=z_getnewaddress"
      - "-exportdir=/srv/zcashd/export"
      - "-gen=1"
      - "-genproclimit=1"
    restart: unless-stopped
    platform: linux/amd64

volumes:
  zcash-regtest-data:

